{"ast":null,"code":"var _jsxFileName = \"/Users/tarak/Documents/projects/Social-Media-Frontend/src/components/Comment/Comment.js\",\n    _s = $RefreshSig$();\n\nimport { Card, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport Link from \"@mui/joy/Link\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ThumbUpOffAltIcon from \"@mui/icons-material/ThumbUpOffAlt\";\nimport { SocketContext } from \"../../contexts/context\";\nimport * as React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { ModalContext } from \"../../contexts/context\";\nimport ThumbUpAltIcon from '@mui/icons-material/ThumbUpAlt';\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dateFormatter = new Intl.DateTimeFormat(undefined, {\n  dateStyle: 'medium',\n  timeStyle: 'short'\n});\nexport default function Comment(_ref) {\n  _s();\n\n  var _useSelector;\n\n  let {\n    data\n  } = _ref;\n  const {\n    like,\n    unlike,\n    fetchLike,\n    listenForLike,\n    isLiked\n  } = React.useContext(SocketContext);\n  const {\n    openLogin\n  } = React.useContext(ModalContext);\n  const user = (_useSelector = useSelector(state => state.auth.user)) !== null && _useSelector !== void 0 ? _useSelector : null;\n  const [likes, setLikes] = useState(0);\n  const [liked, setLiked] = useState(false);\n\n  const likeHandler = async callback => {\n    callback(data._id, user === null || user === void 0 ? void 0 : user._id, state => {\n      setLiked(state);\n    });\n  };\n\n  useEffect(() => {\n    listenForLike(data._id, count => {\n      setLikes(count);\n    });\n    if (user) isLiked(data._id, user._id, state => {\n      setLiked(state);\n    });\n  }, [user]);\n  useEffect(() => {\n    fetchLike(data._id, count => {\n      setLikes(count);\n    });\n  }, [liked]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      boxShadow: 0,\n      borderRadius: 0,\n      padding: '5px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      display: 'flex',\n      mb: 0,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          color: \"text.primary\",\n          fontSize: '0.6em',\n          underline: \"none\",\n          children: data.user[0].company\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        sx: {\n          '&::before': {\n            content: '\" | @\"',\n            marginLeft: \"5px\",\n            fontSize: '0.6em'\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          color: \"text.primary\",\n          fontSize: \"0.6em\",\n          underline: \"none\",\n          children: data.user[0].userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 103\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        justifyContent: \"left\",\n        variant: \"body2\",\n        color: \"text.secondary\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          color: \"text.secondary\",\n          underline: \"none\",\n          children: data.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: user ? liked ? /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          onClick: () => likeHandler(unlike),\n          children: [/*#__PURE__*/_jsxDEV(ThumbUpAltIcon, {\n            sx: {\n              color: 'red'\n            },\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"text.primary\",\n            sx: {\n              fontSize: \"0.5em\"\n            },\n            children: likes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 99\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          onClick: () => likeHandler(like),\n          children: [/*#__PURE__*/_jsxDEV(ThumbUpOffAltIcon, {\n            sx: {\n              color: 'black'\n            },\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"text.primary\",\n            sx: {\n              fontSize: \"0.5em\"\n            },\n            children: likes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          onClick: () => openLogin(),\n          children: [/*#__PURE__*/_jsxDEV(ThumbUpOffAltIcon, {\n            sx: {\n              color: 'black'\n            },\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"text.primary\",\n            sx: {\n              fontSize: \"0.5em\"\n            },\n            children: likes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.primary\",\n          sx: {\n            fontSize: \"0.5em\"\n          },\n          children: dateFormatter.format(Date.parse(data === null || data === void 0 ? void 0 : data.createdAt))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 8\n  }, this);\n}\n\n_s(Comment, \"LrnH7t8h9i6XEtWF3iqcCoYtGRM=\", false, function () {\n  return [useSelector];\n});\n\n_c = Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["Card","Typography","Box","Link","IconButton","ThumbUpOffAltIcon","SocketContext","React","useEffect","useState","ModalContext","ThumbUpAltIcon","useSelector","dateFormatter","Intl","DateTimeFormat","undefined","dateStyle","timeStyle","Comment","data","like","unlike","fetchLike","listenForLike","isLiked","useContext","openLogin","user","state","auth","likes","setLikes","liked","setLiked","likeHandler","callback","_id","count","boxShadow","borderRadius","padding","company","content","marginLeft","fontSize","userName","message","color","format","Date","parse","createdAt"],"sources":["/Users/tarak/Documents/projects/Social-Media-Frontend/src/components/Comment/Comment.js"],"sourcesContent":["import { Card, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport Link from \"@mui/joy/Link\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ThumbUpOffAltIcon from \"@mui/icons-material/ThumbUpOffAlt\";\nimport { SocketContext } from \"../../contexts/context\";\nimport * as React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { ModalContext } from \"../../contexts/context\";\nimport ThumbUpAltIcon from '@mui/icons-material/ThumbUpAlt';\nimport { useSelector } from \"react-redux\"\n\nconst dateFormatter = new Intl.DateTimeFormat(undefined,{\n    dateStyle:'medium',\n    timeStyle:'short'\n})\n\nexport default function Comment({data}){\n    const {like,unlike,fetchLike,listenForLike,isLiked} = React.useContext(SocketContext);\n    const {openLogin} = React.useContext(ModalContext)\n    const user = useSelector(state=>state.auth.user) ?? null\n    const [likes,setLikes] = useState(0)\n    const [liked,setLiked] = useState(false)\n\n    const likeHandler = async(callback)=>{\n        callback(data._id,user?._id,(state)=>{\n          setLiked(state)\n        })\n    }\n\n    useEffect(()=>{\n        listenForLike(data._id,(count)=>{\n            setLikes(count)\n         })\n        if(user) isLiked(data._id,user._id,(state)=>{\n            setLiked(state) \n        })\n    },[user])\n\n    useEffect(()=>{\n        fetchLike(data._id,(count)=>{\n          setLikes(count)\n        })\n    },[liked])\n\n    return(\n       <Card sx={{ boxShadow:0,borderRadius:0,padding:'5px'}}>\n            <Box display={'flex'} mb={0}>\n                <Typography><Link color=\"text.primary\" fontSize={'0.6em'} underline=\"none\">{data.user[0].company}</Link></Typography>\n                <Typography sx={{ '&::before':{ content:'\" | @\"',marginLeft:\"5px\",fontSize:'0.6em'}}}><Link color=\"text.primary\" fontSize=\"0.6em\" underline=\"none\">{data.user[0].userName}</Link></Typography>\n            </Box>\n            <Box>\n                <Typography justifyContent=\"left\" variant=\"body2\" color=\"text.secondary\">\n                <Link color='text.secondary'  underline=\"none\">{data.message}</Link>\n                </Typography>\n            </Box>\n            <Box display={\"flex\"}>\n                <Box>\n                    {user?(liked?(\n                        <IconButton aria-label=\"like\" onClick={()=>likeHandler(unlike)}>\n                            <ThumbUpAltIcon sx={{color:'red'}} fontSize=\"small\" ></ThumbUpAltIcon><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    ):(\n                        <IconButton aria-label=\"like\" onClick={()=>likeHandler(like)}>\n                        <ThumbUpOffAltIcon sx={{color:'black'}} fontSize=\"small\" /><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    )):(\n                        <IconButton aria-label=\"like\" onClick={()=>openLogin()}>\n                        <ThumbUpOffAltIcon sx={{color:'black'}} fontSize=\"small\" /><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    )}\n                </Box>\n                <IconButton>\n                    <Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{dateFormatter.format(Date.parse(data?.createdAt))}</Typography>\n                </IconButton>\n            </Box>\n       </Card>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}