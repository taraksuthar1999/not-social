{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Card,Typography}from\"@mui/material\";import{Box}from\"@mui/system\";import Link from\"@mui/joy/Link\";import IconButton from\"@mui/material/IconButton\";import ThumbUpOffAltIcon from\"@mui/icons-material/ThumbUpOffAlt\";import{SocketContext}from\"../../contexts/context\";import*as React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{ModalContext}from\"../../contexts/context\";import ThumbUpAltIcon from'@mui/icons-material/ThumbUpAlt';import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dateFormatter=new Intl.DateTimeFormat(undefined,{dateStyle:'medium',timeStyle:'short'});export default function Comment(_ref){var _useSelector;var data=_ref.data;var _React$useContext=React.useContext(SocketContext),like=_React$useContext.like,unlike=_React$useContext.unlike,fetchLike=_React$useContext.fetchLike,listenForLike=_React$useContext.listenForLike,isLiked=_React$useContext.isLiked;var _React$useContext2=React.useContext(ModalContext),openLogin=_React$useContext2.openLogin;var user=(_useSelector=useSelector(function(state){return state.auth.user;}))!==null&&_useSelector!==void 0?_useSelector:null;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),likes=_useState2[0],setLikes=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),liked=_useState4[0],setLiked=_useState4[1];var likeHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(callback){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:callback(data._id,user===null||user===void 0?void 0:user._id,function(state){setLiked(state);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function likeHandler(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){listenForLike(data._id,function(count){setLikes(count);});if(user)isLiked(data._id,user._id,function(state){setLiked(state);});},[user]);useEffect(function(){fetchLike(data._id,function(count){setLikes(count);});},[liked]);return/*#__PURE__*/_jsxs(Card,{sx:{boxShadow:0,borderRadius:0,padding:'5px'},children:[/*#__PURE__*/_jsxs(Box,{display:'flex',mb:0,children:[/*#__PURE__*/_jsx(Typography,{children:/*#__PURE__*/_jsx(Link,{color:\"text.primary\",fontSize:'0.6em',underline:\"none\",children:data.user[0].company})}),/*#__PURE__*/_jsx(Typography,{sx:{'&::before':{content:'\" | @\"',marginLeft:\"5px\",fontSize:'0.6em'}},children:/*#__PURE__*/_jsx(Link,{color:\"text.primary\",fontSize:\"0.6em\",underline:\"none\",children:data.user[0].userName})})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{justifyContent:\"left\",variant:\"body2\",color:\"text.secondary\",children:/*#__PURE__*/_jsx(Link,{color:\"text.secondary\",underline:\"none\",children:data.message})})}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",children:[/*#__PURE__*/_jsx(Box,{children:user?liked?/*#__PURE__*/_jsxs(IconButton,{\"aria-label\":\"like\",onClick:function onClick(){return likeHandler(unlike);},children:[/*#__PURE__*/_jsx(ThumbUpAltIcon,{sx:{color:'red'},fontSize:\"small\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",sx:{fontSize:\"0.5em\"},children:likes})]}):/*#__PURE__*/_jsxs(IconButton,{\"aria-label\":\"like\",onClick:function onClick(){return likeHandler(like);},children:[/*#__PURE__*/_jsx(ThumbUpOffAltIcon,{sx:{color:'black'},fontSize:\"small\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",sx:{fontSize:\"0.5em\"},children:likes})]}):/*#__PURE__*/_jsxs(IconButton,{\"aria-label\":\"like\",onClick:function onClick(){return openLogin();},children:[/*#__PURE__*/_jsx(ThumbUpOffAltIcon,{sx:{color:'black'},fontSize:\"small\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",sx:{fontSize:\"0.5em\"},children:likes})]})}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",sx:{fontSize:\"0.5em\"},children:dateFormatter.format(Date.parse(data===null||data===void 0?void 0:data.createdAt))})})]})]});}","map":{"version":3,"names":["Card","Typography","Box","Link","IconButton","ThumbUpOffAltIcon","SocketContext","React","useEffect","useState","ModalContext","ThumbUpAltIcon","useSelector","dateFormatter","Intl","DateTimeFormat","undefined","dateStyle","timeStyle","Comment","data","useContext","like","unlike","fetchLike","listenForLike","isLiked","openLogin","user","state","auth","likes","setLikes","liked","setLiked","likeHandler","callback","_id","count","boxShadow","borderRadius","padding","company","content","marginLeft","fontSize","userName","message","color","format","Date","parse","createdAt"],"sources":["/Users/tarak/Documents/projects/complex/client/src/components/Comment/Comment.js"],"sourcesContent":["import { Card, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport Link from \"@mui/joy/Link\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ThumbUpOffAltIcon from \"@mui/icons-material/ThumbUpOffAlt\";\nimport { SocketContext } from \"../../contexts/context\";\nimport * as React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { ModalContext } from \"../../contexts/context\";\nimport ThumbUpAltIcon from '@mui/icons-material/ThumbUpAlt';\nimport { useSelector } from \"react-redux\"\n\nconst dateFormatter = new Intl.DateTimeFormat(undefined,{\n    dateStyle:'medium',\n    timeStyle:'short'\n})\n\nexport default function Comment({data}){\n    const {like,unlike,fetchLike,listenForLike,isLiked} = React.useContext(SocketContext);\n    const {openLogin} = React.useContext(ModalContext)\n    const user = useSelector(state=>state.auth.user) ?? null\n    const [likes,setLikes] = useState(0)\n    const [liked,setLiked] = useState(false)\n\n    const likeHandler = async(callback)=>{\n        callback(data._id,user?._id,(state)=>{\n          setLiked(state)\n        })\n    }\n\n    useEffect(()=>{\n        listenForLike(data._id,(count)=>{\n            setLikes(count)\n         })\n        if(user) isLiked(data._id,user._id,(state)=>{\n            setLiked(state) \n        })\n    },[user])\n\n    useEffect(()=>{\n        fetchLike(data._id,(count)=>{\n          setLikes(count)\n        })\n    },[liked])\n\n    return(\n       <Card sx={{ boxShadow:0,borderRadius:0,padding:'5px'}}>\n            <Box display={'flex'} mb={0}>\n                <Typography><Link color=\"text.primary\" fontSize={'0.6em'} underline=\"none\">{data.user[0].company}</Link></Typography>\n                <Typography sx={{ '&::before':{ content:'\" | @\"',marginLeft:\"5px\",fontSize:'0.6em'}}}><Link color=\"text.primary\" fontSize=\"0.6em\" underline=\"none\">{data.user[0].userName}</Link></Typography>\n            </Box>\n            <Box>\n                <Typography justifyContent=\"left\" variant=\"body2\" color=\"text.secondary\">\n                <Link color='text.secondary'  underline=\"none\">{data.message}</Link>\n                </Typography>\n            </Box>\n            <Box display={\"flex\"}>\n                <Box>\n                    {user?(liked?(\n                        <IconButton aria-label=\"like\" onClick={()=>likeHandler(unlike)}>\n                            <ThumbUpAltIcon sx={{color:'red'}} fontSize=\"small\" ></ThumbUpAltIcon><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    ):(\n                        <IconButton aria-label=\"like\" onClick={()=>likeHandler(like)}>\n                        <ThumbUpOffAltIcon sx={{color:'black'}} fontSize=\"small\" /><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    )):(\n                        <IconButton aria-label=\"like\" onClick={()=>openLogin()}>\n                        <ThumbUpOffAltIcon sx={{color:'black'}} fontSize=\"small\" /><Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{likes}</Typography>\n                        </IconButton>\n                    )}\n                </Box>\n                <IconButton>\n                    <Typography color='text.primary' sx={{fontSize:\"0.5em\"}}>{dateFormatter.format(Date.parse(data?.createdAt))}</Typography>\n                </IconButton>\n            </Box>\n       </Card>\n    )\n}"],"mappings":"4ZAAA,OAASA,IAAT,CAAeC,UAAf,KAAiC,eAAjC,CACA,OAASC,GAAT,KAAoB,aAApB,CACA,MAAOC,KAAP,KAAiB,eAAjB,CACA,MAAOC,WAAP,KAAuB,0BAAvB,CACA,MAAOC,kBAAP,KAA8B,mCAA9B,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,MAAO,GAAKC,MAAZ,KAAuB,OAAvB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,YAAT,KAA6B,wBAA7B,CACA,MAAOC,eAAP,KAA2B,gCAA3B,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFAEA,GAAMC,cAAa,CAAG,GAAIC,KAAI,CAACC,cAAT,CAAwBC,SAAxB,CAAkC,CACpDC,SAAS,CAAC,QAD0C,CAEpDC,SAAS,CAAC,OAF0C,CAAlC,CAAtB,CAKA,cAAe,SAASC,QAAT,MAAwB,qBAANC,KAAM,MAANA,IAAM,CACnC,sBAAsDb,KAAK,CAACc,UAAN,CAAiBf,aAAjB,CAAtD,CAAOgB,IAAP,mBAAOA,IAAP,CAAYC,MAAZ,mBAAYA,MAAZ,CAAmBC,SAAnB,mBAAmBA,SAAnB,CAA6BC,aAA7B,mBAA6BA,aAA7B,CAA2CC,OAA3C,mBAA2CA,OAA3C,CACA,uBAAoBnB,KAAK,CAACc,UAAN,CAAiBX,YAAjB,CAApB,CAAOiB,SAAP,oBAAOA,SAAP,CACA,GAAMC,KAAI,eAAGhB,WAAW,CAAC,SAAAiB,KAAK,QAAEA,MAAK,CAACC,IAAN,CAAWF,IAAb,EAAN,CAAd,6CAA0C,IAApD,CACA,cAAyBnB,QAAQ,CAAC,CAAD,CAAjC,wCAAOsB,KAAP,eAAaC,QAAb,eACA,eAAyBvB,QAAQ,CAAC,KAAD,CAAjC,yCAAOwB,KAAP,eAAaC,QAAb,eAEA,GAAMC,YAAW,6FAAG,iBAAMC,QAAN,oHAChBA,QAAQ,CAAChB,IAAI,CAACiB,GAAN,CAAUT,IAAV,SAAUA,IAAV,iBAAUA,IAAI,CAAES,GAAhB,CAAoB,SAACR,KAAD,CAAS,CACnCK,QAAQ,CAACL,KAAD,CAAR,CACD,CAFO,CAAR,CADgB,sDAAH,kBAAXM,YAAW,6CAAjB,CAMA3B,SAAS,CAAC,UAAI,CACViB,aAAa,CAACL,IAAI,CAACiB,GAAN,CAAU,SAACC,KAAD,CAAS,CAC5BN,QAAQ,CAACM,KAAD,CAAR,CACF,CAFW,CAAb,CAGA,GAAGV,IAAH,CAASF,OAAO,CAACN,IAAI,CAACiB,GAAN,CAAUT,IAAI,CAACS,GAAf,CAAmB,SAACR,KAAD,CAAS,CACxCK,QAAQ,CAACL,KAAD,CAAR,CACH,CAFe,CAAP,CAGZ,CAPQ,CAOP,CAACD,IAAD,CAPO,CAAT,CASApB,SAAS,CAAC,UAAI,CACVgB,SAAS,CAACJ,IAAI,CAACiB,GAAN,CAAU,SAACC,KAAD,CAAS,CAC1BN,QAAQ,CAACM,KAAD,CAAR,CACD,CAFQ,CAAT,CAGH,CAJQ,CAIP,CAACL,KAAD,CAJO,CAAT,CAMA,mBACG,MAAC,IAAD,EAAM,EAAE,CAAE,CAAEM,SAAS,CAAC,CAAZ,CAAcC,YAAY,CAAC,CAA3B,CAA6BC,OAAO,CAAC,KAArC,CAAV,wBACK,MAAC,GAAD,EAAK,OAAO,CAAE,MAAd,CAAsB,EAAE,CAAE,CAA1B,wBACI,KAAC,UAAD,wBAAY,KAAC,IAAD,EAAM,KAAK,CAAC,cAAZ,CAA2B,QAAQ,CAAE,OAArC,CAA8C,SAAS,CAAC,MAAxD,UAAgErB,IAAI,CAACQ,IAAL,CAAU,CAAV,EAAac,OAA7E,EAAZ,EADJ,cAEI,KAAC,UAAD,EAAY,EAAE,CAAE,CAAE,YAAY,CAAEC,OAAO,CAAC,QAAV,CAAmBC,UAAU,CAAC,KAA9B,CAAoCC,QAAQ,CAAC,OAA7C,CAAd,CAAhB,uBAAsF,KAAC,IAAD,EAAM,KAAK,CAAC,cAAZ,CAA2B,QAAQ,CAAC,OAApC,CAA4C,SAAS,CAAC,MAAtD,UAA8DzB,IAAI,CAACQ,IAAL,CAAU,CAAV,EAAakB,QAA3E,EAAtF,EAFJ,GADL,cAKK,KAAC,GAAD,wBACI,KAAC,UAAD,EAAY,cAAc,CAAC,MAA3B,CAAkC,OAAO,CAAC,OAA1C,CAAkD,KAAK,CAAC,gBAAxD,uBACA,KAAC,IAAD,EAAM,KAAK,CAAC,gBAAZ,CAA8B,SAAS,CAAC,MAAxC,UAAgD1B,IAAI,CAAC2B,OAArD,EADA,EADJ,EALL,cAUK,MAAC,GAAD,EAAK,OAAO,CAAE,MAAd,wBACI,KAAC,GAAD,WACKnB,IAAI,CAAEK,KAAK,cACR,MAAC,UAAD,EAAY,aAAW,MAAvB,CAA8B,OAAO,CAAE,yBAAIE,YAAW,CAACZ,MAAD,CAAf,EAAvC,wBACI,KAAC,cAAD,EAAgB,EAAE,CAAE,CAACyB,KAAK,CAAC,KAAP,CAApB,CAAmC,QAAQ,CAAC,OAA5C,EADJ,cAC0E,KAAC,UAAD,EAAY,KAAK,CAAC,cAAlB,CAAiC,EAAE,CAAE,CAACH,QAAQ,CAAC,OAAV,CAArC,UAA0Dd,KAA1D,EAD1E,GADQ,cAKR,MAAC,UAAD,EAAY,aAAW,MAAvB,CAA8B,OAAO,CAAE,yBAAII,YAAW,CAACb,IAAD,CAAf,EAAvC,wBACA,KAAC,iBAAD,EAAmB,EAAE,CAAE,CAAC0B,KAAK,CAAC,OAAP,CAAvB,CAAwC,QAAQ,CAAC,OAAjD,EADA,cAC2D,KAAC,UAAD,EAAY,KAAK,CAAC,cAAlB,CAAiC,EAAE,CAAE,CAACH,QAAQ,CAAC,OAAV,CAArC,UAA0Dd,KAA1D,EAD3D,GALC,cASD,MAAC,UAAD,EAAY,aAAW,MAAvB,CAA8B,OAAO,CAAE,yBAAIJ,UAAS,EAAb,EAAvC,wBACA,KAAC,iBAAD,EAAmB,EAAE,CAAE,CAACqB,KAAK,CAAC,OAAP,CAAvB,CAAwC,QAAQ,CAAC,OAAjD,EADA,cAC2D,KAAC,UAAD,EAAY,KAAK,CAAC,cAAlB,CAAiC,EAAE,CAAE,CAACH,QAAQ,CAAC,OAAV,CAArC,UAA0Dd,KAA1D,EAD3D,GAVR,EADJ,cAgBI,KAAC,UAAD,wBACI,KAAC,UAAD,EAAY,KAAK,CAAC,cAAlB,CAAiC,EAAE,CAAE,CAACc,QAAQ,CAAC,OAAV,CAArC,UAA0DhC,aAAa,CAACoC,MAAd,CAAqBC,IAAI,CAACC,KAAL,CAAW/B,IAAX,SAAWA,IAAX,iBAAWA,IAAI,CAAEgC,SAAjB,CAArB,CAA1D,EADJ,EAhBJ,GAVL,GADH,CAiCH"},"metadata":{},"sourceType":"module"}