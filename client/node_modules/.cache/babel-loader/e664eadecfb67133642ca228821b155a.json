{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _marked=/*#__PURE__*/_regeneratorRuntime().mark(getPosts),_marked2=/*#__PURE__*/_regeneratorRuntime().mark(getPost),_marked3=/*#__PURE__*/_regeneratorRuntime().mark(commentAdd),_marked4=/*#__PURE__*/_regeneratorRuntime().mark(getCommentsByParentId),_marked5=/*#__PURE__*/_regeneratorRuntime().mark(postSaga);import{takeEvery,call,put,take}from\"redux-saga/effects\";import{actions}from\"./actions\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import Cookies from\"js-cookie\";function getPosts(_ref){var payload,userId,response;return _regeneratorRuntime().wrap(function getPosts$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;userId=payload.userId;_context2.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/post\"),{userId:userId}).then(function(res){return res;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);})));case 5:response=_context2.sent;_context2.next=8;return put(actions.getPostsSuccess(response.data.data));case 8:_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_marked,null,[[1,10]]);}function getPost(_ref3){var payload,id,response;return _regeneratorRuntime().wrap(function getPost$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref3.payload;_context4.prev=1;id=payload.id;_context4.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/post/\").concat(id)).then(function(res){return res;});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee2);})));case 5:response=_context4.sent;_context4.next=8;return put(actions.getPostSuccess(response.data.data[0]));case 8:_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_marked2,null,[[1,10]]);}function commentAdd(_ref5){var payload,message,parentId,callback,response;return _regeneratorRuntime().wrap(function commentAdd$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:payload=_ref5.payload;_context6.prev=1;message=payload.message,parentId=payload.parentId,callback=payload.callback;_context6.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/comment/add\"),{message:message,parentId:parentId}).then(function(res){return res;});case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee3);})));case 5:response=_context6.sent;if(response)callback();_context6.next=9;return put(actions.commentAddSuccess({}));case 9:_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);console.log(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_marked3,null,[[1,11]]);}function getCommentsByParentId(_ref7){var payload,id,response;return _regeneratorRuntime().wrap(function getCommentsByParentId$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref7.payload;_context8.prev=1;id=payload.id;_context8.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/comment/post/\").concat(id)).then(function(res){return res;});case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee4);})));case 5:response=_context8.sent;_context8.next=8;return put(actions.getCommentsByParentIdSuccess(response.data.data));case 8:_context8.next=13;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](1);console.log(_context8.t0);case 13:case\"end\":return _context8.stop();}}},_marked4,null,[[1,10]]);}export function postSaga(){return _regeneratorRuntime().wrap(function postSaga$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeEvery(actions.getPosts,getPosts);case 2:_context9.next=4;return takeEvery(actions.commentAdd,commentAdd);case 4:_context9.next=6;return takeEvery(actions.getPost,getPost);case 6:_context9.next=8;return takeEvery(actions.getCommentsByParentId,getCommentsByParentId);case 8:case\"end\":return _context9.stop();}}},_marked5);}","map":{"version":3,"names":["getPosts","getPost","commentAdd","getCommentsByParentId","postSaga","takeEvery","call","put","take","actions","axios","useNavigate","Cookies","payload","userId","post","process","env","REACT_APP_BASE_URL","then","res","response","getPostsSuccess","data","console","log","id","get","getPostSuccess","message","parentId","callback","commentAddSuccess","getCommentsByParentIdSuccess"],"sources":["/Users/tarak/Documents/projects/complex/client/src/store/post/saga.js"],"sourcesContent":["import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* getPosts({ payload }) {\n    try {\n      const {userId} = payload\n      const response = yield call(async () => {\n        return await axios\n          .post(`${process.env.REACT_APP_BASE_URL}/post`,{userId})\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.getPostsSuccess(response.data.data));\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* getPost({ payload }) {\n    try {\n      const {id} = payload\n      const response = yield call(async () => {\n        return await axios\n          .get(`${process.env.REACT_APP_BASE_URL}/post/${id}`)\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.getPostSuccess(response.data.data[0]));\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* commentAdd({ payload }) {\n    try {\n      const {message,parentId,callback} = payload\n      const response = yield call(async () => {\n        return await axios\n          .post(`${process.env.REACT_APP_BASE_URL}/comment/add`,{message,parentId})\n          .then((res) => {\n            return res;\n          });\n      });\n      if(response) callback()\n      yield put(actions.commentAddSuccess({}));\n\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* getCommentsByParentId({ payload }) {\n  try {\n    const {id} = payload\n    const response = yield call(async () => {\n      return await axios\n        .get(`${process.env.REACT_APP_BASE_URL}/comment/post/${id}`)\n        .then((res) => {\n          return res;\n        });\n    });\n    yield put(actions.getCommentsByParentIdSuccess(response.data.data));\n\n  } catch (error){\n    console.log(error)    \n  }\n}\n\nexport function* postSaga() {\n    yield takeEvery(actions.getPosts, getPosts);\n    yield takeEvery(actions.commentAdd, commentAdd);\n    yield takeEvery(actions.getPost, getPost);\n    yield takeEvery(actions.getCommentsByParentId, getCommentsByParentId);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}