{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import Cookies from\"js-cookie\";import axios from\"axios\";var setAuthToken=function setAuthToken(token){if(token)axios.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);else delete axios.defaults.headers.common[\"Authorization\"];};var initialState={error:{message:\"\",type:\"\"},loading:false,user:null,data:null,token:null};var TOKEN=\"token\";var authReducer=createSlice({name:\"auth\",initialState:initialState,reducers:{login:function login(state,_ref){var payload=_ref.payload;state.loading=true;state.data=payload;},loginSuccess:function loginSuccess(state,_ref2){var payload=_ref2.payload;state.loading=false;state.token=payload.data.data.token;state.data=payload.data.data;state.user=payload.data.data;state.error.message='';Cookies.set(TOKEN,payload.data.data.token,{path:\"/\"});setAuthToken(payload.data.data.token);},loginFailed:function loginFailed(state,_ref3){var payload=_ref3.payload;state.loading=false;state.error.message=payload;state.token=\"\";},register:function register(state,_ref4){var payload=_ref4.payload;state.loading=true;state.data=payload;},registerSuccess:function registerSuccess(state,_ref5){var payload=_ref5.payload;state.loading=false;state.error.message='';},registerFailed:function registerFailed(state,_ref6){var payload=_ref6.payload;state.loading=false;state.error.message=payload;},resetError:function resetError(state){state.error.message=\"\";state.loading=false;},getProfile:function getProfile(state,_ref7){var payload=_ref7.payload;state.loading=true;},logout:function logout(state,_ref8){var payload=_ref8.payload;state.loading=true;state.data=payload;},logoutSuccess:function logoutSuccess(state,_ref9){var payload=_ref9.payload;state.loading=false;state.token=null;state.data=null;state.error.message='';Cookies.remove('token');}}});var name=authReducer.name,actions=authReducer.actions;export{name,actions};export var selectCurrentToken=function selectCurrentToken(state){console.log(\"state\",state);return state.auth.token;};export default authReducer.reducer;","map":{"version":3,"names":["createSlice","Cookies","axios","setAuthToken","token","defaults","headers","common","initialState","error","message","type","loading","user","data","TOKEN","authReducer","name","reducers","login","state","payload","loginSuccess","set","path","loginFailed","register","registerSuccess","registerFailed","resetError","getProfile","logout","logoutSuccess","remove","actions","selectCurrentToken","console","log","auth","reducer"],"sources":["/Users/tarak/Documents/projects/complex/client/src/store/auth/actions.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\n\n\nconst setAuthToken =token=>{\n  if(token) axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n  else delete axios.defaults.headers.common[\"Authorization\"]\n}\n\nconst initialState = {\n  error: {\n    message: \"\",\n    type: \"\",\n  },\n  loading: false,\n  user: null,\n  data: null,\n  token: null,\n};\nconst TOKEN = \"token\";\nconst authReducer = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    login: (state, { payload }) => {\n      state.loading = true;\n      state.data = payload;\n    },\n    loginSuccess: (state, { payload }) => {\n      state.loading = false;\n      state.token = payload.data.data.token;\n      state.data = payload.data.data\n      state.user = payload.data.data\n      state.error.message = ''\n      Cookies.set(TOKEN, payload.data.data.token, { path: \"/\" });\n      setAuthToken(payload.data.data.token)\n    },\n    loginFailed: (state, { payload }) => {\n      state.loading = false;\n      state.error.message = payload;\n      state.token = \"\"\n    },\n    register: (state, { payload }) => {\n      state.loading = true;\n      state.data = payload;\n    },\n    registerSuccess: (state, { payload }) => {\n      state.loading = false;\n      state.error.message = ''\n    },\n    registerFailed: (state, { payload }) => {\n      state.loading = false;\n      state.error.message = payload;\n    },\n    resetError: (state) => {\n      state.error.message = \"\";\n      state.loading = false\n    },\n    getProfile: (state, { payload }) => {\n      state.loading = true;\n    },\n    logout:(state,{payload})=>{\n        state.loading = true;\n        state.data = payload;\n    },\n    logoutSuccess: (state, { payload }) => {\n      state.loading = false;\n      state.token = null;\n      state.data = null;\n      state.error.message = ''\n      Cookies.remove('token');\n    },\n  },\n});\n\nexport const { name, actions } = authReducer;\nexport const selectCurrentToken = (state) => {\n  console.log(\"state\", state);\n  return state.auth.token;\n};\nexport default authReducer.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}