{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _marked=/*#__PURE__*/_regeneratorRuntime().mark(login),_marked2=/*#__PURE__*/_regeneratorRuntime().mark(register),_marked3=/*#__PURE__*/_regeneratorRuntime().mark(logout),_marked4=/*#__PURE__*/_regeneratorRuntime().mark(getProfile),_marked5=/*#__PURE__*/_regeneratorRuntime().mark(authSaga);import{takeEvery,call,put,take}from\"redux-saga/effects\";import{actions}from\"./actions\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import Cookies from\"js-cookie\";function login(_ref){var payload,email,password,response,_error$response,_error$response$data;return _regeneratorRuntime().wrap(function login$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;email=payload.email,password=payload.password;_context2.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/auth/login\"),{email:email,password:password}).then(function(res){return res;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);})));case 5:response=_context2.sent;_context2.next=8;return put(actions.loginSuccess(response));case 8:payload.onLoginSuccess();_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);_context2.next=15;return put(actions.loginFailed(_context2.t0===null||_context2.t0===void 0?void 0:(_error$response=_context2.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message));case 15:case\"end\":return _context2.stop();}}},_marked,null,[[1,11]]);}function register(_ref3){var payload,userName,email,password,response;return _regeneratorRuntime().wrap(function register$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref3.payload;_context4.prev=1;userName=payload.userName,email=payload.email,password=payload.password;_context4.next=5;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/auth/register\"),{userName:userName,email:email,password:password}).then(function(res){console.log(res);return res;});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee2);})));case 5:response=_context4.sent;_context4.next=8;return put(actions.registerSuccess(response));case 8:payload.onRegisterSuccess();_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);_context4.next=15;return put(actions.registerFailed(_context4.t0===null||_context4.t0===void 0?void 0:_context4.t0.response.data.message));case 15:case\"end\":return _context4.stop();}}},_marked2,null,[[1,11]]);}function logout(_ref5){var payload,response;return _regeneratorRuntime().wrap(function logout$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:payload=_ref5.payload;_context6.prev=1;_context6.next=4;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/auth/logout\")).then(function(res){return res;});case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee3);})));case 4:response=_context6.sent;_context6.next=7;return put(actions.logoutSuccess({}));case 7:payload===null||payload===void 0?void 0:payload.onLogoutSuccess();_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](1);console.log(_context6.t0);case 13:case\"end\":return _context6.stop();}}},_marked3,null,[[1,10]]);}function getProfile(_ref7){var payload,response;return _regeneratorRuntime().wrap(function getProfile$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref7.payload;_context8.prev=1;_context8.next=4;return call(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/auth/profile\")).then(function(res){return res;});case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee4);})));case 4:response=_context8.sent;_context8.next=7;return put(actions.loginSuccess(response));case 7:_context8.next=13;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](1);_context8.next=13;return put(actions.logoutSuccess({}));case 13:case\"end\":return _context8.stop();}}},_marked4,null,[[1,9]]);}export function authSaga(){return _regeneratorRuntime().wrap(function authSaga$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeEvery(actions.login,login);case 2:_context9.next=4;return takeEvery(actions.getProfile,getProfile);case 4:_context9.next=6;return takeEvery(actions.register,register);case 6:_context9.next=8;return takeEvery(actions.logout,logout);case 8:case\"end\":return _context9.stop();}}},_marked5);}","map":{"version":3,"names":["login","register","logout","getProfile","authSaga","takeEvery","call","put","take","actions","axios","useNavigate","Cookies","payload","email","password","post","process","env","REACT_APP_BASE_URL","then","res","response","loginSuccess","onLoginSuccess","loginFailed","data","message","userName","console","log","registerSuccess","onRegisterSuccess","registerFailed","get","logoutSuccess","onLogoutSuccess"],"sources":["/Users/tarak/Documents/projects/complex/client/src/store/auth/saga.js"],"sourcesContent":["import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* login({ payload }) {\n  try {\n    const {email,password} = payload\n    const response = yield call(async () => {\n      return await axios\n        .post(`${process.env.REACT_APP_BASE_URL}/auth/login`,{email,password})\n        .then((res) => {\n          return res;\n        });\n    });\n    yield put(actions.loginSuccess(response));\n    payload.onLoginSuccess()\n  } catch (error) {\n    yield put(actions.loginFailed(error?.response?.data?.message));\n  }\n}\nfunction* register({ payload }) {\n  try {\n    const {userName,email,password} = payload;\n    const response = yield call(async () => {\n      return await axios\n        .post(`${process.env.REACT_APP_BASE_URL}/auth/register`, {userName,email,password})\n        .then((res) => {\n          console.log(res);\n          return res;\n        });\n    });\n    yield put(actions.registerSuccess(response));\n    payload.onRegisterSuccess()\n  } catch (error) {\n    yield put(actions.registerFailed(error?.response.data.message));\n  }\n}\nfunction* logout({ payload }) {\n  try {\n    const response = yield call(async () => {\n      return await axios\n        .get(`${process.env.REACT_APP_BASE_URL}/auth/logout`)\n        .then((res) => {\n          return res;\n        });\n    });\n    yield put(actions.logoutSuccess({}));\n    payload?.onLogoutSuccess()\n  } catch (error) {\n    console.log(error)\n  }\n}\nfunction* getProfile({ payload }) {\n    try {\n      const response = yield call(async () => {\n        return await axios\n          .get(`${process.env.REACT_APP_BASE_URL}/auth/profile`)\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.loginSuccess(response))\n    } catch (error) {\n      yield put(actions.logoutSuccess({}))\n    }\n}\nexport function* authSaga() {\n  yield takeEvery(actions.login, login);\n  yield takeEvery(actions.getProfile, getProfile);\n  yield takeEvery(actions.register, register);\n  yield takeEvery(actions.logout, logout);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}