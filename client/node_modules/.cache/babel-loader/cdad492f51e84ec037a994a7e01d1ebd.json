{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{call}from\"redux-saga/effects\";import socketio from\"socket.io-client\";import{io}from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ModalContext=/*#__PURE__*/React.createContext(false);export var ModalProvider=function ModalProvider(_ref){var children=_ref.children;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isShown=_React$useState2[0],setIsShown=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),login=_React$useState4[0],setLogin=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),register=_React$useState6[0],setRegister=_React$useState6[1];function openLogin(){setRegister(false);setLogin(true);setIsShown(true);}function openRegister(){setRegister(true);setLogin(false);setIsShown(true);}function close(){setRegister(false);setLogin(false);setIsShown(false);}return/*#__PURE__*/_jsx(ModalContext.Provider,{value:{isShown:isShown,login:login,register:register,setIsShown:setIsShown,setLogin:setLogin,setRegister:setRegister,openLogin:openLogin,close:close,openRegister:openRegister},children:children});};export var socket=socketio.connect(process.env.REACT_APP_BACKEND_URL,{withCredentials:true});// export const socket = io('/')\nconsole.log(process.env.REACT_APP_BACKEND_URL,'back');export var SocketContext=/*#__PURE__*/React.createContext(false);export var SocketProvider=function SocketProvider(_ref2){var children=_ref2.children;// const [iosocket,setIosocket] = useState(socket)\nuseEffect(function(){socket.on('connect',function(){});socket.on(\"connect_error\",function(err){console.log(err);console.log(\"connect_error due to \".concat(err.message));});},[]);var like=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,userId,callback){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return socket.emit('like',id,userId,callback);case 2:case\"end\":return _context.stop();}}},_callee);}));return function like(_x,_x2,_x3){return _ref3.apply(this,arguments);};}();var view=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return socket.emit('view',id);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function view(_x4){return _ref4.apply(this,arguments);};}();var unlike=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,userId,callback){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return socket.emit('unlike',id,userId,callback);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function unlike(_x5,_x6,_x7){return _ref5.apply(this,arguments);};}();var fetchLike=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id,callback){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return socket.emit('likes',id,callback);case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchLike(_x8,_x9){return _ref6.apply(this,arguments);};}();var fetchView=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id,callback){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return socket.emit('views',id,callback);case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchView(_x10,_x11){return _ref7.apply(this,arguments);};}();var fetchComment=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(id,callback){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return socket.emit('comments',id,callback);case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function fetchComment(_x12,_x13){return _ref8.apply(this,arguments);};}();var listenForLike=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(id,callback){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return socket.on(\"listen:like:\".concat(id),callback);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function listenForLike(_x14,_x15){return _ref9.apply(this,arguments);};}();var listenForView=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(id,callback){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return socket.on(\"listen:view:\".concat(id),callback);case 2:case\"end\":return _context8.stop();}}},_callee8);}));return function listenForView(_x16,_x17){return _ref10.apply(this,arguments);};}();var listenForComment=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(id,callback){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return socket.on(\"listen:comment:\".concat(id),callback);case 2:case\"end\":return _context9.stop();}}},_callee9);}));return function listenForComment(_x18,_x19){return _ref11.apply(this,arguments);};}();var isLiked=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(id,userId,callback){return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(userId){_context10.next=2;break;}return _context10.abrupt(\"return\");case 2:_context10.next=4;return socket.emit('isLiked',id,userId,callback);case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function isLiked(_x20,_x21,_x22){return _ref12.apply(this,arguments);};}();return/*#__PURE__*/_jsx(SocketContext.Provider,{value:{socket:socket,like:like,unlike:unlike,fetchLike:fetchLike,listenForLike:listenForLike,view:view,listenForView:listenForView,fetchView:fetchView,isLiked:isLiked,listenForComment:listenForComment,fetchComment:fetchComment},children:children});};","map":{"version":3,"names":["React","useEffect","useState","call","socketio","io","ModalContext","createContext","ModalProvider","children","isShown","setIsShown","login","setLogin","register","setRegister","openLogin","openRegister","close","socket","connect","process","env","REACT_APP_BACKEND_URL","withCredentials","console","log","SocketContext","SocketProvider","on","err","message","like","id","userId","callback","emit","view","unlike","fetchLike","fetchView","fetchComment","listenForLike","listenForView","listenForComment","isLiked"],"sources":["/Users/tarak/Documents/projects/complex/client/src/contexts/context.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { call } from \"redux-saga/effects\";\nimport socketio from \"socket.io-client\";\nimport {io} from \"socket.io-client\";\nexport const ModalContext = React.createContext(false);\nexport const ModalProvider = ({children})=>{\n    const [isShown,setIsShown] = React.useState(false)\n    const [login,setLogin] = React.useState(false)\n    const [register,setRegister] = React.useState(false)\n    function openLogin(){\n        setRegister(false)\n        setLogin(true)\n        setIsShown(true)\n    }\n    function openRegister(){\n        setRegister(true)\n        setLogin(false)\n        setIsShown(true)\n    }\n    function close(){\n        setRegister(false)\n        setLogin(false)\n        setIsShown(false)\n    }\n    return(\n        <ModalContext.Provider value={{isShown,login,register,setIsShown,setLogin,setRegister,openLogin,close,openRegister}}>\n            {children}\n        </ModalContext.Provider>\n    )\n}\nexport const socket = socketio.connect(process.env.REACT_APP_BACKEND_URL, {\n    withCredentials: true,\n})\n// export const socket = io('/')\nconsole.log(process.env.REACT_APP_BACKEND_URL,'back')\nexport const SocketContext = React.createContext(false);\n\nexport const SocketProvider = ({children})=>{\n    // const [iosocket,setIosocket] = useState(socket)\n    useEffect(()=>{\n        socket.on('connect',()=>{\n        })\n        socket.on(\"connect_error\", (err) => {\n            console.log(err)\n            console.log(`connect_error due to ${err.message}`);\n        })\n    },[])\n    const like = async(id,userId,callback)=>{\n        await socket.emit('like',id,userId,callback)\n    }\n    const view = async(id)=>{\n        await socket.emit('view',id)\n    }\n    const unlike = async(id,userId,callback)=>{\n        await socket.emit('unlike',id,userId,callback)\n    }\n    const fetchLike = async(id,callback)=>{\n        await socket.emit('likes',id,callback)\n    }\n    const fetchView = async(id,callback)=>{\n        await socket.emit('views',id,callback)\n    }\n    const fetchComment = async(id,callback)=>{\n        await socket.emit('comments',id,callback)\n    }\n    const listenForLike = async(id,callback)=>{\n        await socket.on(`listen:like:${id}`,callback)\n    }\n    const listenForView = async(id,callback)=>{\n        await socket.on(`listen:view:${id}`,callback)\n    }\n    const listenForComment = async(id,callback)=>{\n        await socket.on(`listen:comment:${id}`,callback)\n    }\n    const isLiked = async(id,userId,callback)=>{\n        if(!userId) return\n        await socket.emit('isLiked',id,userId,callback)\n    }\n     return(\n        <SocketContext.Provider value={{socket,like,unlike,fetchLike,listenForLike,view,listenForView,fetchView,isLiked,listenForComment,fetchComment}}>{children}</SocketContext.Provider>\n    )\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}