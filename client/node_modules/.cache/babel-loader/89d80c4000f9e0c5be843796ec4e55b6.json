{"ast":null,"code":"var _jsxFileName = \"/Users/tarak/Documents/projects/complex/client/src/contexts/context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { call } from \"redux-saga/effects\";\nimport socketio from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModalContext = /*#__PURE__*/React.createContext(false);\nexport const ModalProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [isShown, setIsShown] = React.useState(false);\n  const [login, setLogin] = React.useState(false);\n  const [register, setRegister] = React.useState(false);\n\n  function openLogin() {\n    setRegister(false);\n    setLogin(true);\n    setIsShown(true);\n  }\n\n  function openRegister() {\n    setRegister(true);\n    setLogin(false);\n    setIsShown(true);\n  }\n\n  function close() {\n    setRegister(false);\n    setLogin(false);\n    setIsShown(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(ModalContext.Provider, {\n    value: {\n      isShown,\n      login,\n      register,\n      setIsShown,\n      setLogin,\n      setRegister,\n      openLogin,\n      close,\n      openRegister\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ModalProvider, \"UiLowq3TIMHhBdSWn3SXL6snXK4=\");\n\n_c = ModalProvider;\nexport const socket = socketio.connect(process.env.REACT_APP_BACKEND_URL, {\n  withCredentials: true\n});\nexport const SocketContext = /*#__PURE__*/React.createContext(false);\nexport const SocketProvider = _ref2 => {\n  _s2();\n\n  let {\n    children\n  } = _ref2;\n  // const [iosocket,setIosocket] = useState(socket)\n  useEffect(() => {\n    socket.on('connect', () => {});\n    socket.on(\"connect_error\", err => {\n      console.log(`connect_error due to ${err.message}`);\n    });\n  }, []);\n\n  const like = async (id, userId, callback) => {\n    await socket.emit('like', id, userId, callback);\n  };\n\n  const view = async id => {\n    await socket.emit('view', id);\n  };\n\n  const unlike = async (id, userId, callback) => {\n    await socket.emit('unlike', id, userId, callback);\n  };\n\n  const fetchLike = async (id, callback) => {\n    await socket.emit('likes', id, callback);\n  };\n\n  const fetchView = async (id, callback) => {\n    await socket.emit('views', id, callback);\n  };\n\n  const fetchComment = async (id, callback) => {\n    await socket.emit('comments', id, callback);\n  };\n\n  const listenForLike = async (id, callback) => {\n    await socket.on(`listen:like:${id}`, callback);\n  };\n\n  const listenForView = async (id, callback) => {\n    await socket.on(`listen:view:${id}`, callback);\n  };\n\n  const listenForComment = async (id, callback) => {\n    await socket.on(`listen:comment:${id}`, callback);\n  };\n\n  const isLiked = async (id, userId, callback) => {\n    if (!userId) return;\n    await socket.emit('isLiked', id, userId, callback);\n  };\n\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: {\n      socket,\n      like,\n      unlike,\n      fetchLike,\n      listenForLike,\n      view,\n      listenForView,\n      fetchView,\n      isLiked,\n      listenForComment,\n      fetchComment\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(SocketProvider, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c2 = SocketProvider;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ModalProvider\");\n$RefreshReg$(_c2, \"SocketProvider\");","map":{"version":3,"names":["React","useEffect","useState","call","socketio","ModalContext","createContext","ModalProvider","children","isShown","setIsShown","login","setLogin","register","setRegister","openLogin","openRegister","close","socket","connect","process","env","REACT_APP_BACKEND_URL","withCredentials","SocketContext","SocketProvider","on","err","console","log","message","like","id","userId","callback","emit","view","unlike","fetchLike","fetchView","fetchComment","listenForLike","listenForView","listenForComment","isLiked"],"sources":["/Users/tarak/Documents/projects/complex/client/src/contexts/context.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { call } from \"redux-saga/effects\";\nimport socketio from \"socket.io-client\";\nexport const ModalContext = React.createContext(false);\nexport const ModalProvider = ({children})=>{\n    const [isShown,setIsShown] = React.useState(false)\n    const [login,setLogin] = React.useState(false)\n    const [register,setRegister] = React.useState(false)\n    function openLogin(){\n        setRegister(false)\n        setLogin(true)\n        setIsShown(true)\n    }\n    function openRegister(){\n        setRegister(true)\n        setLogin(false)\n        setIsShown(true)\n    }\n    function close(){\n        setRegister(false)\n        setLogin(false)\n        setIsShown(false)\n    }\n    return(\n        <ModalContext.Provider value={{isShown,login,register,setIsShown,setLogin,setRegister,openLogin,close,openRegister}}>\n            {children}\n        </ModalContext.Provider>\n    )\n}\nexport const socket = socketio.connect(process.env.REACT_APP_BACKEND_URL, {\n    withCredentials: true,\n})\n\nexport const SocketContext = React.createContext(false);\n\nexport const SocketProvider = ({children})=>{\n    // const [iosocket,setIosocket] = useState(socket)\n    useEffect(()=>{\n        socket.on('connect',()=>{\n        })\n        socket.on(\"connect_error\", (err) => {\n            console.log(`connect_error due to ${err.message}`);\n        })\n    },[])\n    const like = async(id,userId,callback)=>{\n        await socket.emit('like',id,userId,callback)\n    }\n    const view = async(id)=>{\n        await socket.emit('view',id)\n    }\n    const unlike = async(id,userId,callback)=>{\n        await socket.emit('unlike',id,userId,callback)\n    }\n    const fetchLike = async(id,callback)=>{\n        await socket.emit('likes',id,callback)\n    }\n    const fetchView = async(id,callback)=>{\n        await socket.emit('views',id,callback)\n    }\n    const fetchComment = async(id,callback)=>{\n        await socket.emit('comments',id,callback)\n    }\n    const listenForLike = async(id,callback)=>{\n        await socket.on(`listen:like:${id}`,callback)\n    }\n    const listenForView = async(id,callback)=>{\n        await socket.on(`listen:view:${id}`,callback)\n    }\n    const listenForComment = async(id,callback)=>{\n        await socket.on(`listen:comment:${id}`,callback)\n    }\n    const isLiked = async(id,userId,callback)=>{\n        if(!userId) return\n        await socket.emit('isLiked',id,userId,callback)\n    }\n     return(\n        <SocketContext.Provider value={{socket,like,unlike,fetchLike,listenForLike,view,listenForView,fetchView,isLiked,listenForComment,fetchComment}}>{children}</SocketContext.Provider>\n    )\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}