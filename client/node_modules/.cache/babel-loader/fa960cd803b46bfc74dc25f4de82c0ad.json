{"ast":null,"code":"import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* getPosts(_ref) {\n  let {\n    payload\n  } = _ref;\n\n  try {\n    const {\n      userId\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.post(`${process.env.REACT_APP_BASE_URL}/post`, {\n        userId\n      }).then(res => {\n        return res;\n      });\n    });\n    yield put(actions.getPostsSuccess(response.data.data));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* getPost(_ref2) {\n  let {\n    payload\n  } = _ref2;\n\n  try {\n    const {\n      id\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.get(`${process.env.REACT_APP_BASE_URL}/post/${id}`).then(res => {\n        return res;\n      });\n    });\n    yield put(actions.getPostSuccess(response.data.data[0]));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* commentAdd(_ref3) {\n  let {\n    payload\n  } = _ref3;\n\n  try {\n    const {\n      message,\n      parentId,\n      callback\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.post(`${process.env.REACT_APP_BASE_URL}/comment/add`, {\n        message,\n        parentId\n      }).then(res => {\n        return res;\n      });\n    });\n    if (response) callback();\n    yield put(actions.commentAddSuccess({}));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* getCommentsByParentId(_ref4) {\n  let {\n    payload\n  } = _ref4;\n\n  try {\n    const {\n      id\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.get(`${process.env.REACT_APP_BASE_URL}/comment/post/${id}`).then(res => {\n        return res;\n      });\n    });\n    console.log(response.data.data);\n    yield put(actions.getCommentsByParentIdSuccess(response.data.data));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function* postSaga() {\n  yield takeEvery(actions.getPosts, getPosts);\n  yield takeEvery(actions.commentAdd, commentAdd);\n  yield takeEvery(actions.getPost, getPost);\n  yield takeEvery(actions.getCommentsByParentId, getCommentsByParentId);\n}","map":{"version":3,"names":["takeEvery","call","put","take","actions","axios","useNavigate","Cookies","getPosts","payload","userId","response","post","process","env","REACT_APP_BASE_URL","then","res","getPostsSuccess","data","error","console","log","getPost","id","get","getPostSuccess","commentAdd","message","parentId","callback","commentAddSuccess","getCommentsByParentId","getCommentsByParentIdSuccess","postSaga"],"sources":["/Users/tarak/Documents/projects/complex/client/src/store/post/saga.js"],"sourcesContent":["import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* getPosts({ payload }) {\n    try {\n      const {userId} = payload\n      const response = yield call(async () => {\n        return await axios\n          .post(`${process.env.REACT_APP_BASE_URL}/post`,{userId})\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.getPostsSuccess(response.data.data));\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* getPost({ payload }) {\n    try {\n      const {id} = payload\n      const response = yield call(async () => {\n        return await axios\n          .get(`${process.env.REACT_APP_BASE_URL}/post/${id}`)\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.getPostSuccess(response.data.data[0]));\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* commentAdd({ payload }) {\n    try {\n      const {message,parentId,callback} = payload\n      const response = yield call(async () => {\n        return await axios\n          .post(`${process.env.REACT_APP_BASE_URL}/comment/add`,{message,parentId})\n          .then((res) => {\n            return res;\n          });\n      });\n      if(response) callback()\n      yield put(actions.commentAddSuccess({}));\n\n    } catch (error){\n      console.log(error)    \n    }\n}\nfunction* getCommentsByParentId({ payload }) {\n  try {\n    const {id} = payload\n    const response = yield call(async () => {\n      return await axios\n        .get(`${process.env.REACT_APP_BASE_URL}/comment/post/${id}`)\n        .then((res) => {\n          return res;\n        });\n    });\n    console.log(response.data.data)\n    yield put(actions.getCommentsByParentIdSuccess(response.data.data));\n\n  } catch (error){\n    console.log(error)    \n  }\n}\n\nexport function* postSaga() {\n    yield takeEvery(actions.getPosts, getPosts);\n    yield takeEvery(actions.commentAdd, commentAdd);\n    yield takeEvery(actions.getPost, getPost);\n    yield takeEvery(actions.getCommentsByParentId, getCommentsByParentId);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}