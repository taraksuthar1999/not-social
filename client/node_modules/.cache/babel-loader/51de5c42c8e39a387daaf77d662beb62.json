{"ast":null,"code":"import _objectSpread from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{connect,useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import*as Yup from\"yup\";import{useFormik,FormikProvider,Form}from\"formik\";import{Button,Grid,Link,TextField,Typography}from\"@mui/material\";import{Alert}from\"@mui/material\";import{Box}from\"@mui/system\";import{actions}from\"../../store/auth/actions\";import{ModalContext}from\"../../contexts/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={userName:\"\",email:\"\",password:\"\"};var validationSchema=Yup.object({userName:Yup.string().required(\"User Name is required\").min(3).label(\"UserName\"),email:Yup.string().email().required(\"Email is required\").label(\"Email\"),password:Yup.string().required(\"Password is required\").min(8,\"Too short\").label(\"Password\"),passwordConfirmation:Yup.string().oneOf([Yup.ref(\"password\"),null],\"Passwords must match\")});var Register=function Register(props){var _props$auth$error,_props$auth$error2;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,1),initFormData=_useState2[0];var _useContext=useContext(ModalContext),openLogin=_useContext.openLogin;var navigate=useNavigate();var onRegisterSuccess=function onRegisterSuccess(){openLogin();navigate('/');};var _onSubmit=function onSubmit(formData){delete formData.passwordConfirmation;props.register(_objectSpread(_objectSpread({},formData),{},{onRegisterSuccess:onRegisterSuccess}));};var formik=useFormik({initialValues:initFormData,validationSchema:validationSchema,enableReinitialize:true,onSubmit:function onSubmit(values){return _onSubmit(values);}});var handleChange=formik.handleChange,handleSubmit=formik.handleSubmit,values=formik.values,errors=formik.errors,touched=formik.touched,handleBlur=formik.handleBlur;return/*#__PURE__*/_jsx(Box,{width:\"65%\",height:\"350px\",ml:\"auto\",mr:\"auto\",mt:\"auto\",mb:\"auto\",children:/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,height:\"100%\",width:\"100%\",ml:\"auto\",mr:\"auto\",justifyContent:\"center\",display:\"block\",children:[/*#__PURE__*/_jsx(Grid,{mb:3,item:true,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"userName\",placeholder:\"Username\",onChange:handleChange,onBlur:handleBlur,value:values.userName,error:errors.userName&&touched.userName,helperText:errors.userName&&touched.userName?errors.userName:null})}),/*#__PURE__*/_jsx(Grid,{mb:3,item:true,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"email\",placeholder:\"Email\",onChange:handleChange,onBlur:handleBlur,value:values.email,error:errors.email&&touched.email,helperText:errors.email&&touched.email?errors.email:null})}),/*#__PURE__*/_jsx(Grid,{item:true,mb:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"password\",placeholder:\"Password\",type:\"password\",onChange:handleChange,onBlur:handleBlur,value:values.password,error:errors.password&&touched.password,helperText:errors.password&&touched.password?errors.password:null})}),/*#__PURE__*/_jsx(Grid,{item:true,mb:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"passwordConfirmation\",placeholder:\"Confirm Password\",type:\"password\",onChange:handleChange,onBlur:handleBlur,value:values.passwordConfirmation||'',error:errors.passwordConfirmation&&touched.passwordConfirmation,helperText:errors.passwordConfirmation&&touched.passwordConfirmation?errors.passwordConfirmation:null})}),/*#__PURE__*/_jsxs(Grid,{item:true,mb:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{borderRadius:0,backgroundColor:\"black\",fontWeight:\"bold\",\"&:hover\":{backgroundColor:\"black\"}},type:\"submit\",fullWidth:true,children:\"Register\"}),(_props$auth$error=props.auth.error)!==null&&_props$auth$error!==void 0&&_props$auth$error.message?/*#__PURE__*/_jsx(\"span\",{className:\"msg alert\",children:(_props$auth$error2=props.auth.error)===null||_props$auth$error2===void 0?void 0:_props$auth$error2.message}):null]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"span\",{children:\"New to App?\"}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{onClick:openLogin,underline:\"none\",sx:{fontWeight:\"bold\",color:\"turquoise\"},children:\"SIGN IN\"})]})]})})})});};var register=actions.register;var resetError=actions.resetError;var ConnectedRegister=connect(function(state){return state;},{resetError:resetError,register:register})(Register);export default ConnectedRegister;","map":{"version":3,"names":["React","useContext","useState","connect","useDispatch","useNavigate","Yup","useFormik","FormikProvider","Form","Button","Grid","Link","TextField","Typography","Alert","Box","actions","ModalContext","initialState","userName","email","password","validationSchema","object","string","required","min","label","passwordConfirmation","oneOf","ref","Register","props","initFormData","openLogin","navigate","onRegisterSuccess","onSubmit","formData","register","formik","initialValues","enableReinitialize","values","handleChange","handleSubmit","errors","touched","handleBlur","borderRadius","backgroundColor","fontWeight","auth","error","message","color","resetError","ConnectedRegister","state"],"sources":["/Users/tarak/Documents/projects/complex/client/src/components/Auth/Register.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport { useFormik, FormikProvider, Form } from \"formik\";\nimport { Button, Grid, Link, TextField, Typography } from \"@mui/material\";\nimport { Alert } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { actions } from \"../../store/auth/actions\";\nimport { ModalContext } from \"../../contexts/context\";\n\nconst initialState = {\n  userName: \"\",\n  email: \"\",\n  password: \"\",\n};\n\nconst validationSchema = Yup.object({\n  userName: Yup.string()\n    .required(\"User Name is required\")\n    .min(3)\n    .label(\"UserName\"),\n  email: Yup.string().email().required(\"Email is required\").label(\"Email\"),\n  password: Yup.string()\n    .required(\"Password is required\")\n    .min(8, \"Too short\")\n    .label(\"Password\"),\n  passwordConfirmation: Yup.string().oneOf(\n    [Yup.ref(\"password\"), null],\n    \"Passwords must match\"\n  ),\n});\n\nconst Register = (props) => {\n  const [initFormData] = useState(initialState);\n  const {openLogin} = useContext(ModalContext)\n  const navigate = useNavigate();\n\n  const onRegisterSuccess =()=>{\n    openLogin()\n    navigate('/')\n  } \n\n  const onSubmit = (formData) => {\n    delete formData.passwordConfirmation;\n    props.register({...formData,onRegisterSuccess});\n  };\n  const formik = useFormik({\n    initialValues: initFormData,\n    validationSchema: validationSchema,\n    enableReinitialize: true,\n    onSubmit: (values) => onSubmit(values),\n  });\n\n  const { handleChange, handleSubmit, values, errors, touched, handleBlur } =\n    formik;\n\n  return (\n    <Box width=\"65%\" height=\"350px\" ml=\"auto\" mr=\"auto\" mt=\"auto\" mb=\"auto\">\n      <FormikProvider value={formik}>\n        <Form onSubmit={handleSubmit}>\n          <Grid\n            container\n            height=\"100%\"\n            width=\"100%\"\n            ml=\"auto\"\n            mr=\"auto\"\n            justifyContent=\"center\"\n            display=\"block\"\n          >\n            <Grid mb={3} item>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"userName\"\n                placeholder=\"Username\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.userName}\n                error={errors.userName && touched.userName}\n                helperText={\n                  errors.userName && touched.userName ? errors.userName : null\n                }\n              />\n            </Grid>\n            <Grid mb={3} item>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"email\"\n                placeholder=\"Email\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.email}\n                error={errors.email && touched.email}\n                helperText={errors.email && touched.email ? errors.email : null}\n              />\n            </Grid>\n            <Grid item mb={3}>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"password\"\n                placeholder=\"Password\"\n                type=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.password}\n                error={errors.password && touched.password}\n                helperText={\n                  errors.password && touched.password ? errors.password : null\n                }\n              />\n            </Grid>\n            <Grid item mb={3}>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"passwordConfirmation\"\n                placeholder=\"Confirm Password\"\n                type=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.passwordConfirmation || ''}\n                error={\n                  errors.passwordConfirmation && touched.passwordConfirmation\n                }\n                helperText={\n                  errors.passwordConfirmation && touched.passwordConfirmation\n                    ? errors.passwordConfirmation\n                    : null\n                }\n              />\n            </Grid>\n            <Grid item mb={3}>\n              <Button\n                variant=\"contained\"\n                sx={{\n                  borderRadius: 0,\n                  backgroundColor: \"black\",\n                  fontWeight: \"bold\",\n                  \"&:hover\": {\n                    backgroundColor: \"black\",\n                  },\n                }}\n                type=\"submit\"\n                fullWidth\n              >\n                Register\n              </Button>\n              {props.auth.error?.message ? (\n                 <span className=\"msg alert\">{props.auth.error?.message}</span>\n        ) : null}\n            </Grid>\n            <Grid item>\n              <span>New to App?</span>&nbsp;\n              <Link\n                onClick={openLogin}\n                underline=\"none\"\n                sx={{ fontWeight: \"bold\", color: \"turquoise\" }}\n              >\n                SIGN IN\n              </Link>\n            </Grid>\n          </Grid>\n        </Form>\n      </FormikProvider>\n    </Box>\n  );\n};\nconst register = actions.register;\nconst resetError = actions.resetError;\nconst ConnectedRegister = connect((state) => state, { resetError, register })(\n  Register\n);\nexport default ConnectedRegister;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}