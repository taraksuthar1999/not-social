{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tarak/Documents/projects/complex/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{connect,useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import*as Yup from\"yup\";import{useFormik,FormikProvider,Form}from\"formik\";import{Button,Grid,Link,TextField,Typography}from\"@mui/material\";import{Alert}from\"@mui/material\";import{Box}from\"@mui/system\";import{actions}from\"../../store/auth/actions\";import Loading from\"../../utils/Loading\";import{ModalContext}from\"../../contexts/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={email:\"\",password:\"\"};var validationSchema=Yup.object({email:Yup.string().email().required(\"Email is required\").label(\"Email\"),password:Yup.string().required(\"Password is required\").min(8,\"Too short\").label(\"Password\")});var Login=function Login(props){var _props$auth$error,_props$auth$error2;var _useState=useState(initialState),_useState2=_slicedToArray(_useState,1),initFormData=_useState2[0];var _React$useContext=React.useContext(ModalContext),close=_React$useContext.close,openRegister=_React$useContext.openRegister;var navigate=useNavigate();var onLoginSuccess=function onLoginSuccess(){close();console.log(props.auth);navigate('/');};var _onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(formData){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.login(_objectSpread(_objectSpread({},formData),{},{onLoginSuccess:onLoginSuccess}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var formik=useFormik({initialValues:initFormData,validationSchema:validationSchema,enableReinitialize:true,onSubmit:function onSubmit(values){return _onSubmit(values);}});var handleChange=formik.handleChange,handleSubmit=formik.handleSubmit,values=formik.values,errors=formik.errors,touched=formik.touched,handleBlur=formik.handleBlur;return props.auth.loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Box,{width:\"65%\",height:\"250px\",ml:\"auto\",mr:\"auto\",mt:\"auto\",mb:\"auto\",children:/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,height:\"100%\",width:\"100%\",ml:\"auto\",mr:\"auto\",justifyContent:\"center\",display:\"block\",children:[/*#__PURE__*/_jsx(Grid,{mb:3,item:true,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"email\",placeholder:\"Email\",onChange:handleChange,onBlur:handleBlur,value:values.email,error:errors.email&&touched.email,helperText:errors.email&&touched.email?errors.email:null})}),/*#__PURE__*/_jsx(Grid,{item:true,mb:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"standard\",name:\"password\",placeholder:\"Password\",type:\"password\",onChange:handleChange,onBlur:handleBlur,value:values.password,error:errors.password&&touched.password,helperText:errors.password&&touched.password?errors.password:null})}),/*#__PURE__*/_jsxs(Grid,{item:true,mb:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{borderRadius:0,backgroundColor:\"black\",fontWeight:\"bold\",\"&:hover\":{backgroundColor:\"black\"}},type:\"submit\",fullWidth:true,children:\"Login\"}),(_props$auth$error=props.auth.error)!==null&&_props$auth$error!==void 0&&_props$auth$error.message?/*#__PURE__*/_jsx(\"span\",{className:\"msg alert\",children:(_props$auth$error2=props.auth.error)===null||_props$auth$error2===void 0?void 0:_props$auth$error2.message}):null]}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"span\",{children:\"New to App?\"}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{onClick:openRegister,underline:\"none\",sx:{fontWeight:\"bold\",color:\"turquoise\"},children:\"SIGN UP\"})]})]})})})});};var login=actions.login;var resetError=actions.resetError;var ConnectedLogin=connect(function(state){return state;},{login:login,resetError:resetError})(Login);export default ConnectedLogin;","map":{"version":3,"names":["React","useContext","useEffect","useState","connect","useDispatch","useSelector","useNavigate","Yup","useFormik","FormikProvider","Form","Button","Grid","Link","TextField","Typography","Alert","Box","actions","Loading","ModalContext","initialState","email","password","validationSchema","object","string","required","label","min","Login","props","initFormData","close","openRegister","navigate","onLoginSuccess","console","log","auth","onSubmit","formData","login","formik","initialValues","enableReinitialize","values","handleChange","handleSubmit","errors","touched","handleBlur","loading","borderRadius","backgroundColor","fontWeight","error","message","color","resetError","ConnectedLogin","state"],"sources":["/Users/tarak/Documents/projects/complex/client/src/components/Auth/Login.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport { useFormik, FormikProvider, Form } from \"formik\";\nimport { Button, Grid, Link, TextField, Typography } from \"@mui/material\";\nimport { Alert } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { actions } from \"../../store/auth/actions\";\nimport Loading from \"../../utils/Loading\";\nimport { ModalContext } from \"../../contexts/context\";\n\nconst initialState = {\n  email: \"\",\n  password: \"\",\n};\n\nconst validationSchema = Yup.object({\n  email: Yup.string().email().required(\"Email is required\").label(\"Email\"),\n  password: Yup.string()\n    .required(\"Password is required\")\n    .min(8, \"Too short\")\n    .label(\"Password\"),\n});\n\nconst Login = (props) => {\n  const [initFormData] = useState(initialState);\n  const {close,openRegister} = React.useContext(ModalContext)\n  const navigate = useNavigate();\n\n  const onLoginSuccess =()=>{\n    close()\n    console.log(props.auth)\n    navigate('/')\n  } \n  const onSubmit = async (formData) => {\n    props.login({...formData,onLoginSuccess});\n  };\n  const formik = useFormik({\n    initialValues: initFormData,\n    validationSchema: validationSchema,\n    enableReinitialize: true,\n    onSubmit: (values) => onSubmit(values),\n  });\n  \n  const { handleChange, handleSubmit, values, errors, touched, handleBlur } =\n  formik;\n  \n\n  return props.auth.loading ? (\n    <Loading />\n  ) : (\n    <Box width=\"65%\" height=\"250px\" ml=\"auto\" mr=\"auto\" mt=\"auto\" mb=\"auto\">\n      <FormikProvider value={formik}>\n        <Form onSubmit={handleSubmit}>\n          <Grid\n            container\n            height=\"100%\"\n            width=\"100%\"\n            ml=\"auto\"\n            mr=\"auto\"\n            justifyContent=\"center\"\n            display=\"block\"\n          >\n            <Grid mb={3} item>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"email\"\n                placeholder=\"Email\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.email}\n                error={errors.email && touched.email}\n                helperText={errors.email && touched.email ? errors.email : null}\n              />\n            </Grid>\n            <Grid item mb={3}>\n              <TextField\n                fullWidth\n                variant=\"standard\"\n                name=\"password\"\n                placeholder=\"Password\"\n                type=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.password}\n                error={errors.password && touched.password}\n                helperText={\n                  errors.password && touched.password ? errors.password : null\n                }\n              />\n            </Grid>\n            <Grid item mb={3}>\n              <Button\n                variant=\"contained\"\n                sx={{\n                  borderRadius: 0,\n                  backgroundColor: \"black\",\n                  fontWeight: \"bold\",\n                  \"&:hover\": {\n                    backgroundColor: \"black\",\n                  },\n                }}\n                type=\"submit\"\n                fullWidth\n              >\n                Login\n              </Button>\n              {props.auth.error?.message ? (\n                 <span className=\"msg alert\">{props.auth.error?.message}</span>\n        ) : null}\n             \n            </Grid>\n            <Grid item>\n              <span>New to App?</span>&nbsp;\n              <Link\n                onClick={openRegister}\n                underline=\"none\"\n                sx={{ fontWeight: \"bold\", color: \"turquoise\" }}\n              >\n                SIGN UP\n              </Link>\n            </Grid>\n          </Grid>\n        </Form>\n      </FormikProvider>\n    </Box>\n  );\n};\nconst login = actions.login;\nconst resetError = actions.resetError;\nconst ConnectedLogin = connect((state) => state, { login, resetError })(Login);\nexport default ConnectedLogin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}