{"ast":null,"code":"import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* login(_ref) {\n  let {\n    payload\n  } = _ref;\n\n  try {\n    const {\n      email,\n      password\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.post(`${process.env.REACT_APP_BASE_URL}/auth/login`, {\n        email,\n        password\n      }).then(res => {\n        return res;\n      });\n    });\n    yield put(actions.loginSuccess(response));\n    payload.onLoginSuccess();\n  } catch (error) {\n    var _error$response, _error$response$data;\n\n    yield put(actions.loginFailed(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message));\n  }\n}\n\nfunction* register(_ref2) {\n  let {\n    payload\n  } = _ref2;\n\n  try {\n    const {\n      userName,\n      email,\n      password\n    } = payload;\n    const response = yield call(async () => {\n      return await axios.post(`${process.env.REACT_APP_BASE_URL}/auth/register`, {\n        userName,\n        email,\n        password\n      }).then(res => {\n        console.log(res);\n        return res;\n      });\n    });\n    yield put(actions.registerSuccess(response));\n    payload.onRegisterSuccess();\n  } catch (error) {\n    yield put(actions.registerFailed(error === null || error === void 0 ? void 0 : error.response.data.message));\n  }\n}\n\nfunction* logout(_ref3) {\n  let {\n    payload\n  } = _ref3;\n\n  try {\n    const response = yield call(async () => {\n      return await axios.get(`${process.env.REACT_APP_BASE_URL}/auth/logout`).then(res => {\n        return res;\n      });\n    });\n    yield put(actions.logoutSuccess({}));\n    payload === null || payload === void 0 ? void 0 : payload.onLogoutSuccess();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* getProfile(_ref4) {\n  let {\n    payload\n  } = _ref4;\n\n  try {\n    const response = yield call(async () => {\n      return await axios.get(`${process.env.REACT_APP_BASE_URL}/auth/profile`).then(res => {\n        return res;\n      });\n    });\n    yield put(actions.loginSuccess(response));\n  } catch (error) {\n    yield put(actions.logoutSuccess({}));\n  }\n}\n\nexport function* authSaga() {\n  yield takeEvery(actions.login, login);\n  yield takeEvery(actions.getProfile, getProfile);\n  yield takeEvery(actions.register, register);\n  yield takeEvery(actions.logout, logout);\n}","map":{"version":3,"names":["takeEvery","call","put","take","actions","axios","useNavigate","Cookies","login","payload","email","password","response","post","process","env","REACT_APP_BASE_URL","then","res","loginSuccess","onLoginSuccess","error","loginFailed","data","message","register","userName","console","log","registerSuccess","onRegisterSuccess","registerFailed","logout","get","logoutSuccess","onLogoutSuccess","getProfile","authSaga"],"sources":["/Users/tarak/Documents/projects/Social-Media-Frontend/src/store/auth/saga.js"],"sourcesContent":["import { takeEvery, call, put, take } from \"redux-saga/effects\";\nimport { actions } from \"./actions\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction* login({ payload }) {\n  try {\n    const {email,password} = payload\n    const response = yield call(async () => {\n      return await axios\n        .post(`${process.env.REACT_APP_BASE_URL}/auth/login`,{email,password})\n        .then((res) => {\n          return res;\n        });\n    });\n    yield put(actions.loginSuccess(response));\n    payload.onLoginSuccess()\n  } catch (error) {\n    yield put(actions.loginFailed(error?.response?.data?.message));\n  }\n}\nfunction* register({ payload }) {\n  try {\n    const {userName,email,password} = payload;\n    const response = yield call(async () => {\n      return await axios\n        .post(`${process.env.REACT_APP_BASE_URL}/auth/register`, {userName,email,password})\n        .then((res) => {\n          console.log(res);\n          return res;\n        });\n    });\n    yield put(actions.registerSuccess(response));\n    payload.onRegisterSuccess()\n  } catch (error) {\n    yield put(actions.registerFailed(error?.response.data.message));\n  }\n}\nfunction* logout({ payload }) {\n  try {\n    const response = yield call(async () => {\n      return await axios\n        .get(`${process.env.REACT_APP_BASE_URL}/auth/logout`)\n        .then((res) => {\n          return res;\n        });\n    });\n    yield put(actions.logoutSuccess({}));\n    payload?.onLogoutSuccess()\n  } catch (error) {\n    console.log(error)\n  }\n}\nfunction* getProfile({ payload }) {\n    try {\n      const response = yield call(async () => {\n        return await axios\n          .get(`${process.env.REACT_APP_BASE_URL}/auth/profile`)\n          .then((res) => {\n            return res;\n          });\n      });\n      yield put(actions.loginSuccess(response))\n    } catch (error) {\n      yield put(actions.logoutSuccess({}))\n    }\n}\nexport function* authSaga() {\n  yield takeEvery(actions.login, login);\n  yield takeEvery(actions.getProfile, getProfile);\n  yield takeEvery(actions.register, register);\n  yield takeEvery(actions.logout, logout);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}